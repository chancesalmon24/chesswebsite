<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tecumseh Chess Lessons - Professional Chess Lessons</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #38a169; /* Fallback color */
            background-image: linear-gradient(135deg, #48bb78 0%, #38a169 100%), url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400' viewBox='0 0 400 400'%3e%3ctext x='50' y='80' font-size='60' fill='rgba(0,0,0,0.06)'%3e♔%3c/text%3e%3ctext x='150' y='120' font-size='60' fill='rgba(0,0,0,0.06)'%3e♞%3c/text%3e%3ctext x='220' y='250' font-size='60' fill='rgba(0,0,0,0.06)'%3e♜%3c/text%3e%3ctext x='80' y='200' font-size='60' fill='rgba(0,0,0,0.06)'%3e♝%3c/text%3e%3ctext x='300' y='50' font-size='60' fill='rgba(0,0,0,0.06)'%3e♛%3c/text%3e%3ctext x='20' y='350' font-size='60' fill='rgba(0,0,0,0.06)'%3e♟%3c/text%3e%3c/svg%3e");
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            /* padding: 1rem 0; */ /* Replaced with fixed height and flexbox for alignment */
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            height: 80px; /* Set a fixed height for the header */
            display: flex;
            align-items: center;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 0 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo-text {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
            font-size: 1.1rem; /* Adjusted for two lines */
            color: #2d3748;
            letter-spacing: -0.5px;
            line-height: 1.1; /* Adjust line height for stacked text */
        }

        .chess-piece {
            font-size: 2.2rem;
            color: #38a169;
            line-height: 1;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #4a5568;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        /* Hamburger Menu Styles */
        .hamburger-menu {
            display: none; /* Hidden by default on desktop */
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            cursor: pointer;
            z-index: 1100; /* Above nav-links when active */
        }

        .hamburger-menu span {
            display: block;
            width: 100%;
            height: 3px;
            background-color: #4a5568;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        /* Hamburger animation to 'X' */
        .hamburger-menu.open span:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }

        .hamburger-menu.open span:nth-child(2) {
            opacity: 0;
        }

        .hamburger-menu.open span:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }

        /* Mobile Nav Links */
        /* Styles for when the menu is open will be in the media query */

        .nav-links a:hover {
            color: #48bb78;
        }

        main {
            margin-top: 120px; /* Increased space from header */
        }

        .hero {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 4rem 0;
            text-align: center;
            color: white;
            margin: 2rem 0;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden; /* To contain the pseudo-elements */
        }

        .hero::before,
        .hero::after {
            content: '';
            position: absolute;
            font-family: 'Times New Roman', serif; /* A font that supports chess pieces well */
            color: white;
            opacity: 0.08;
            font-size: 250px; /* Large size */
            top: 50%;
            transform: translateY(-50%);
            z-index: 0;
            pointer-events: none;
            line-height: 1;
        }

        .hero::before {
            content: '♔'; /* King */
            left: 5%;
        }

        .hero::after {
            content: '♞'; /* Knight */
            right: 5%;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            animation: fadeInUp 1s ease-out;
            line-height: 1.2; /* Adjusts vertical spacing between lines */
        }

        .hero-subtitle {
            font-size: 1.5rem;
            margin-top: -0.5rem;
            margin-bottom: 2rem;
            font-weight: 400;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.1s both;
        }

        .hero-description {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        /* Ensure hero content is above pseudo-elements */
        .hero > * {
            position: relative;
            z-index: 1;
        }
        .hero::before, .hero::after {
            z-index: 0;
        }

        .hero-social-links {
            margin-top: 1.5rem; /* Spacing from the button above */
            margin-bottom: 0; /* No extra space needed at the bottom of hero */
            animation: fadeInUp 1s ease-out 0.5s both; /* Appear after button */
        }

        .hero-social-links a {
            color: white;
            margin: 0 15px;
            display: inline-block;
            transition: transform 0.3s ease;
        }

        .hero-social-links a:hover {
            transform: scale(1.15);
        }

        .hero-social-links a svg {
            width: 32px;
            height: 32px;
            vertical-align: middle;
        }
        .cta-button {
            display: inline-block;
            background: linear-gradient(45deg, #38a169, #2f855a);
            color: white;
            padding: 12px 30px;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(47, 133, 90, 0.4);
            animation: fadeInUp 1s ease-out 0.4s both;
            text-align: center;
        }

        .cta-button-subtext {
            display: block;
            font-size: 0.7rem;
            font-weight: normal;
            opacity: 0.9;
            margin-top: 2px;
        }

        .video-placeholder {
            aspect-ratio: 16 / 9;
            width: 90%;
            max-width: 800px;
            margin: 2rem auto;
            background: #000; /* Black background for a clean look */
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            animation: fadeInUp 1s ease-out 0.2s both;
            overflow: hidden; /* Ensures the iframe corners are rounded */
        }

        .video-placeholder iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(47, 133, 90, 0.6);
        }

        .section-cta-wrapper {
            text-align: center;
            margin-top: 3rem;
        }

        .section,
        .reviews-section {
            background: white;
            margin: 2rem 0;
            padding: 3rem 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .section:hover,
        .reviews-section:hover {
            transform: translateY(-5px);
        }

        .reviews-section h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-align: center;
            color: #4a5568;
            position: relative;
        }

        .reviews-section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: linear-gradient(45deg, #48bb78, #38a169);
            border-radius: 2px;
        }

        .section h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            text-align: center;
            color: #4a5568;
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background: linear-gradient(45deg, #48bb78, #38a169);
            border-radius: 2px;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .about-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 3rem;
            align-items: center;
        }

        .reviews-slider-container {
            position: relative;
            overflow: hidden;
        }

        .reviews-slider {
            display: flex;
            transition: transform 0.5s ease-in-out;
            align-items: flex-start; /* Prevents slides from stretching vertically */
        }

        .reviews-page {
            display: grid;
            grid-template-columns: 1fr; /* Single column layout */
            gap: 2rem;
            min-width: 100%;
            padding: 0 15%; /* Add padding on desktop to prevent it being too wide */
        }

        .slider-navigation {
            position: absolute;
            top: 50%;
            width: 100%;
            display: flex;
            justify-content: space-between;
            transform: translateY(-50%);
            padding: 0 1rem;
            z-index: 10;
        }

        .slider-navigation button {
            background: rgba(255, 255, 255, 0.7);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .slider-dots {
            text-align: center;
            padding-top: 1rem;
        }

        .dot {
            cursor: pointer;
            height: 12px;
            width: 12px;
            margin: 0 5px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.3s ease;
        }

        .dot.active {
            background-color: #48bb78;
        }

        .review {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
        }

        .service-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            min-width: 0; /* Allow cards to shrink below their content size */
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .service-card:hover {
            transform: translateY(-10px);
            border-color: #48bb78;
            box-shadow: 0 15px 35px rgba(72, 187, 120, 0.2);
        }

        .instagram-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .instagram-card {
            background: #fff;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
        }

        .instagram-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.12);
        }

        .instagram-thumbnail {
            position: relative;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            background-size: cover;
            background-position: center;
        }

        .play-button-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .instagram-card:hover .play-button-overlay {
            opacity: 1;
            background: rgba(0, 0, 0, 0.5);
        }

        .play-button-overlay svg {
            color: white;
        }
        .service-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .mission-icon {
            font-size: 3rem;
            color: #38a169;
            margin-bottom: 1rem;
            line-height: 1;
        }

        .mission-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 3rem;
        }

        .mission-item {
            text-align: center;
        }

        .mission-item h3 {
            font-size: 1.75rem;
            color: #4a5568;
            margin-bottom: 1rem;
        }

        .mission-item p {
            color: #6c757d;
        }

        .instructor-avatar {
            width: 200px; /* Or your desired size */
            height: 200px; /* Or your desired size */
            border-radius: 50%; /* Makes the image circular */
            object-fit: cover; /* Prevents the image from stretching */
            margin: 0 auto; /* Centers the image */
            display: block;
            border: 5px solid #38a169; /* Adds a themed border */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); /* Adds depth */
        }

        .instructor-name {
            text-align: center;
            margin-top: 1rem;
            font-size: 1.5rem;
            color: #2d3748;
            font-weight: 600;
        }

        .qualifications {
            margin-top: 2rem;
        }
        .qualifications-list {
            margin-top: 0.5rem;
        }

        .scheduling-info {
            margin-bottom: 3rem;
            padding: 2rem;
            background: #f8f9fa;
            border-radius: 15px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }

        .scheduling-info h3 {
            font-size: 1.75rem;
            color: #4a5568;
            margin-bottom: 1rem;
        }

        .scheduling-info p {
            color: #6c757d;
            max-width: 800px;
            margin: 0 auto;
        }

        .availability-highlight {
            margin-top: 1.5rem;
            padding: 1rem 1.5rem;
            background: #e9f7ef; /* A light green background */
            border-left: 5px solid #38a169;
            border-radius: 8px;
            display: inline-block; /* To make it fit the content width and respect center alignment */
        }

        .availability-highlight h4 {
            font-size: 1.25rem;
            color: #2d3748;
            margin-bottom: 0.5rem;
        }

        .availability-highlight p {
            font-size: 1.1rem;
            color: #4a5568;
            margin: 0; /* Reset margin for the paragraph inside */
        }

        .map-container {
            position: relative;
            overflow: hidden;
            padding-top: 56.25%; /* 16:9 Aspect Ratio for a responsive map */
            border-radius: 15px;
            margin-top: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .map-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 1;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
            transition: opacity 0.3s ease;
            opacity: 1;
        }

        .map-overlay::after {
            content: 'Click to activate map';
            font-weight: bold;
            padding: 0.5rem 1rem;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            font-size: 1rem;
        }

        .map-overlay.hidden {
            opacity: 0;
            pointer-events: none; /* Allows clicks to pass through to the map */
        }

        .location-photos-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .location-photo img {
            width: 100%;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .location-photo img:hover {
            transform: scale(1.03);
        }

        .photo-gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 3rem;
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .photo-item img:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        @media (max-width: 768px) {
            .mission-grid,
            .services-grid {
                grid-template-columns: 1fr;  /* revert to a 1-column grid on smaller screens */
            }
            .location-photos-grid {
                grid-template-columns: 1fr;
            }
            .service-card {
                min-width: auto;
            }
        }

        /* Calendar Styles */
        .calendar-container {
            max-width: 1200px;
            margin: 2rem auto;
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .calendar-header h3 {
            font-size: 1.75rem;
            color: #2d3748;
            font-family: 'Poppins', sans-serif;
        }

        .calendar-header button {
            background: #38a169;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .calendar-header button:hover {
            background: #2f855a;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .calendar-day {
            padding: 15px 10px;
            text-align: center;
            min-height: 180px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            min-width: 0; /* Prevents grid item from expanding due to long content */
        }

        .calendar-day:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .day-of-week {
            font-size: 0.9rem;
            color: #6c757d;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
        }

        .day-number {
            font-weight: bold;
            font-size: 2rem;
            line-height: 1.2;
            color: #2d3748;
        }

        .calendar-day.unavailable {
            color: #ccc;
            background: #f9f9f9;
            cursor: not-allowed;
        }
        .calendar-day.unavailable:hover {
            transform: none;
            box-shadow: none;
        }

        .calendar-day.today {
            background-color: #e9f7ef;
            border-color: #38a169;
        }

        .calendar-day.booked {
            background-color: #e9f7ef; /* Light green to indicate availability */
        }

        .calendar-legend {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9rem;
            color: #4a5568;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 15px;
            height: 15px;
            border-radius: 4px;
        }

        .legend-color.chess { background-color: #e9f7ef; border: 1px solid #38a169; } /* Green for Chess */
        .legend-color.math { background-color: #dbeafe; border: 1px solid #2563eb; } /* Rich Blue for Math */

        /* Events Section */
        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .event-card {
            background: #f8f9fa;
            border-radius: 15px;
            display: flex;
            gap: 1.5rem;
            padding: 1.5rem;
            align-items: center;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
        }

        .event-date {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border-radius: 10px;
            text-align: center;
            padding: 1rem;
            font-weight: bold;
            flex-shrink: 0;
            width: 90px; /* Increased width to prevent cutoff */
        }

        .event-date .month {
            display: block;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .event-date .day {
            display: block;
            font-size: 2.4rem; /* Slightly reduced font size for better fit */
            line-height: 1;
        }

        .event-details h3 {
            font-size: 1.25rem;
            color: #2d3748;
            margin-bottom: 0.5rem;
        }

        .event-details p {
            color: #6c757d;
            margin-bottom: 1rem;
        }

        .event-button {
            text-decoration: none;
            color: #38a169;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .event-button:hover {
            color: #2f855a;
        }

        .pricing-table {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .pricing-card {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            padding: 2.5rem 2rem;
            border-radius: 20px;            
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid transparent;
            font-family: 'Poppins', sans-serif;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .pricing-card:hover {
            transform: scale(1.05) rotate(1deg);
            box-shadow: 0 15px 30px rgba(72, 187, 120, 0.5), 0 0 20px rgba(255, 255, 255, 0.3);
            border: 2px solid transparent;
            background: linear-gradient(135deg, #38a169, #2f855a);
        }

        .pricing-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
        }
        
        .pricing-card:hover::before {
            opacity: 1;
            animation: shine 0.6s ease-in-out;
        }

        .pricing-card.featured::after {
            content: 'Popular';
            position: absolute;
            top: 20px;
            right: -40px;
            background: #FFD700;
            color: #1a202c;
            padding: 5px 40px;
            transform: rotate(45deg);
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .pricing-card:nth-child(1)::after,  /* Target "1 Kid - Once a Week" card */
        .pricing-card:nth-child(2)::after {  /* Target "1 Kid - Twice a Week" card */
            content: 'Popular';
            position: absolute;
            top: 20px;
            right: -40px;
            background: #FFD700;
            color: #1a202c;
            padding: 5px 40px;
            transform: rotate(45deg);
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }


        .price {
            font-size: 3.5rem;
            font-weight: 700;
            margin: 1rem 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .price-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #4a5568;
        }

        .optional-text {
            font-weight: 400;
            color: #6c757d;
            font-size: 0.9em;
            margin-left: 5px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #48bb78;
            box-shadow: 0 0 0 3px rgba(72, 187, 120, 0.1);
        }

        .submit-btn {
            background: linear-gradient(45deg, #48bb78, #38a169);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(72, 187, 120, 0.3);
        }

        footer {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .social-links {
            margin-top: 1rem;
        }

        .social-links a {
            color: white;
            font-size: 1.5rem;
            margin: 0 10px;
            transition: color 0.3s ease;
            text-decoration: none;
    display: inline-flex;
    align-items: center;
        }

        .social-links a:hover {
            color: #48bb78;
        }

.social-links a svg {
    width: 1.5rem; /* Match the font-size of other icons */
    height: 1.5rem;
}

        #modal-current-bookings-container {
            margin: 2rem 0 1.5rem 0; /* More space on top, standard space on bottom */
            padding: 1rem;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            text-align: left;
            display: none; /* Hidden by default, shown by JS if bookings exist */
        }
        #modal-current-bookings-container h4 {
            margin: 0 0 0.75rem 0;
            color: #4a5568;
            font-size: 1.1rem;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        #modal-current-bookings-container ul {
            margin: 0;
            max-height: 150px; /* Give it a max height and scroll for many bookings */
            overflow-y: auto;
        }

        /* Modal Styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 2000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.5); /* Black w/ opacity */
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 2rem;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 15px;
            text-align: center;
            position: relative;
            animation: slideIn 0.4s;
        }

        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-form-group {
            margin-bottom: 1rem;
            text-align: left;
        }
        .modal-form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #4a5568;
        }
        .modal-form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .lesson-type-selector {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 10px;
            font-size: 1.1rem;
        }
        .lesson-type-selector label {
            display: flex;
            align-items: center; /* This is the key fix for vertical alignment */
            gap: 8px; /* Adds a nice space between the circle and the text */
            cursor: pointer;
        }
        .lesson-type-selector input[type="radio"] {
            margin: 0; /* Removes default browser margins */
            accent-color: #38a169; /* Green for chess */
            width: 1.1em;
            height: 1.1em;
        }
        .lesson-type-selector input[type="radio"][value="math"] {
            accent-color: #2563eb; /* Rich Blue for math */
        }

        .time-period {
            margin-bottom: 1.5rem;
        }
        .time-period:last-child {
            margin-bottom: 0;
        }
        .time-period h4 {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 0.75rem;
            text-align: left;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.5rem;
        }
        .time-slots-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: flex-start; /* Align buttons to the start */
            margin-top: 0.5rem;
        }
        .time-slot-btn {
            background: white;
            border: 1px solid #cbd5e0;
            color: #4a5568;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .time-slot-btn:hover {
            background: #f7fafc;
            border-color: #a0aec0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }
        .time-slot-btn.selected {
            background: #38a169;
            color: white;
            border-color: #2f855a;
            font-weight: bold;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(56, 161, 105, 0.4);
        }

        .day-booking-list {
            list-style: none;
            padding: 0;
            margin-top: 10px;
            font-size: 0.85rem;
            text-align: left;
            max-height: 105px; /* More height available */
            overflow-y: auto;
        }
        .day-booking-list::-webkit-scrollbar {
            width: 4px;
        }
        .day-booking-list::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 2px;
        }

        .day-booking-list li {
            display: flex;
            position: relative; /* For positioning the delete button */
            align-items: center;
            gap: 8px;
            background: #e9f7ef;
            color: #2f855a;
            padding: 5px 8px;
            border-radius: 6px;
            margin-bottom: 5px;
            font-weight: 600;
            border-left: 3px solid #38a169;
            overflow: hidden;
        }

        .day-booking-list li.math-booking {
            background: #dbeafe; /* Lighter rich blue */
            border-left-color: #2563eb; /* Rich blue */
        }
        .day-booking-list li.math-booking .booking-name {
            color: #1e40af; /* Darker rich blue */
        }
        .day-booking-list li.math-booking .booking-time {
            color: #2563eb; /* Rich blue */
        }
        .day-booking-list li.math-booking svg {
            stroke: #1e40af; /* Darker rich blue */
        }
        .booking-info {
            display: flex;
            flex-direction: column;
            line-height: 1.2;
            min-width: 0;
        }

        .booking-name {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .booking-time {
            font-size: 0.9em;
            font-weight: 500;
            color: #38a169;
        }

        .day-booking-list li span {
            /* This class is no longer used for layout, styles moved to specific classes */
        }

        .day-booking-list li svg {
            flex-shrink: 0;
            width: 12px;
            height: 12px;
            stroke-width: 2;
        }

        .delete-booking-btn {
            position: absolute;
            top: 2px;
            right: 2px;
            background: transparent;
            border: none;
            color: #a0aec0; /* A softer gray color */
            font-family: sans-serif;
            font-size: 1rem;
            font-weight: bold;
            line-height: 1;
            cursor: pointer;
            padding: 4px 6px;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        .delete-booking-btn:hover {
            background-color: #fed7d7; /* Light red background on hover */
            color: #c53030; /* Darker red text on hover */
        }

        #modal-bookings-list {
            list-style: none;
            padding: 0;
            margin: 1rem 0 2rem 0;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        /* === Mobile Styles === */
        @media (max-width: 768px) {
            .nav-links {
                position: fixed; /* Fixed so it stays when scrolling */
                top: 80px; /* Position below the 80px header */
                left: 0;
                width: 100%;
                background: rgba(255, 255, 255, 0.98);
                backdrop-filter: blur(10px);
                flex-direction: column;
                align-items: stretch;
                gap: 0;
                
                /* Use max-height for a smooth slide-down animation */
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.4s ease-in-out;

                z-index: 999;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            }

            .nav-links.mobile-active {
                max-height: 500px; /* A height larger than the menu content */
            }

            .nav-links a {
                height: 50px; /* Fixed height for each link */
                line-height: 50px; /* Vertically center text within the fixed height */
                text-align: center;
                border-top: 1px solid rgba(0, 0, 0, 0.05);
                padding: 0 1rem; /* Keep horizontal padding */
            }

            .nav-links li {
                opacity: 0;
                transform: translateY(-15px);
                transition: opacity 0.3s ease-out, transform 0.4s ease-out;
            }

            .nav-links.mobile-active li {
                opacity: 1;
                transform: translateY(0);
            }

            /* Staggered delay for each link to create a cascading effect */
            .nav-links.mobile-active li:nth-child(1) { transition-delay: 0.1s; }
            .nav-links.mobile-active li:nth-child(2) { transition-delay: 0.15s; }
            .nav-links.mobile-active li:nth-child(3) { transition-delay: 0.2s; }
            .nav-links.mobile-active li:nth-child(4) { transition-delay: 0.25s; }
            .nav-links.mobile-active li:nth-child(5) { transition-delay: 0.3s; }
            .nav-links.mobile-active li:nth-child(6) { transition-delay: 0.35s; }
            .nav-links.mobile-active li:nth-child(7) { transition-delay: 0.4s; }
            .nav-links.mobile-active li:nth-child(8) { transition-delay: 0.45s; }
            .nav-links.mobile-active li:nth-child(9) { transition-delay: 0.5s; }

            .hamburger-menu {
                display: flex;
            }

            .hero::before,
            .hero::after {
                font-size: 180px; /* Make them a bit larger */
                opacity: 0.1; /* Increase visibility */
            }
            .hero::before {
                left: -15px; /* Position them to peek from the edge */
            }
            .hero::after {
                right: -15px; /* Position them to peek from the edge */
            }


            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .pricing-table, .services-grid {
                grid-template-columns: 1fr;
            }

            .reviews-page {
                padding: 0 1.5rem; /* This is the key fix for mobile reviews */
            }

            .about-grid {
                grid-template-columns: 1fr; /* Stack about section on mobile */
                text-align: center;
            }

            .section, .reviews-section {
                padding: 2rem 1rem;
            }

            .section h2, .reviews-section h2 {
                font-size: 2rem;
            }
            .qualifications {
                display: inline-block; /* Allows the parent's text-align:center to work */
                text-align: left; /* Aligns the text inside this block to the left */
            }

            /* Calendar Mobile Styles */
            .calendar-container {
                padding: 0.5rem;
            }

            .calendar-grid {
                gap: 3px;
            }

            .calendar-day {
                min-height: 120px;
                padding: 8px 5px;
            }

            .day-number {
                font-size: 1.5rem;
            }

            .day-of-week {
                font-size: 0.7rem;
            }

        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="#home" class="logo">
                <span class="chess-piece">♔</span>
                <span class="logo-text">Tecumseh<br>Chess</span>
            </a>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#mission">Our Mission</a></li>
                <li><a href="#events">Events</a></li>
                <li><a href="#community-photos">Photos</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#pricing">Membership</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#location">Location</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <div class="hamburger-menu">
                <span></span><span></span><span></span>
            </div>
        </nav>
    </header>

    <main class="container">
        <section id="home" class="hero">
            <h1>Education and Fun Come Together!</h1>
            <p class="hero-subtitle">Over 140+ Students taught in the Tecumseh and Windsor area. Premium chess lessons for you or your kids at an affordable price!</p>
            <div class="video-placeholder">
                <iframe src="https://www.youtube.com/embed/7GVHGrIc8Rk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <p class="hero-description">Amazing chess lessons for all ages and skill levels!</p>
            <a href="#contact" class="cta-button">
                Book A Free Intro Lesson!
                <span class="cta-button-subtext">(scrolls to bottom)</span>
            </a>
            <div class="hero-social-links">
                <a href="https://instagram.com/tecumsehchess" target="_blank" title="Follow us on Instagram">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                </a>
                <a href="https://www.facebook.com/your-page-here" target="_blank" title="Follow us on Facebook">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>
                </a>
                <p style="margin-top: 0.75rem; font-size: 1.1rem; font-weight: 500; opacity: 0.9;">@tecumsehchess</p>
            </div>
        </section>

        <section id="calendar" class="section">
            <h2>Class Schedule</h2>
            <p style="text-align:center; color: #6c757d; margin-top: -1rem; margin-bottom: 2rem;">Click on a day to see available time slots and book your lesson!</p>
            <div class="calendar-container">
                <div class="calendar-header">
                    <button id="prev-month" aria-label="Previous month">&#10094;</button>
                    <h3 id="month-year"></h3>
                    <button id="next-month" aria-label="Next month">&#10095;</button>
                </div>
                <div class="calendar-legend">
                    <div class="legend-item">
                        <span class="legend-color chess"></span>
                        <span>Chess Booking</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color math"></span>
                        <span>Math Booking</span>
                    </div>
                </div>
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>
        </section>

        <section id="community-photos" class="section">
            <h2>Our Community in Action</h2>
            <p style="text-align:center; color: #6c757d; margin-top: -1rem; margin-bottom: 2rem;">A glimpse into our vibrant chess community, events, and student successes.</p>
            <div class="photo-gallery-grid">
                <!-- Photos start here -->
                <div class="photo-item">
                    <img src="images/525989077_17942617194040385_4212945890040080596_n.jpg" alt="Students playing chess at an event">
                </div>
                <div class="photo-item">
                    <img src="images/527697490_17943385443040385_6572568058503988379_n.jpg" alt="A group of chess students smiling">
                </div>
                <div class="photo-item">
                    <img src="images/IMG_1215.JPG" alt="A young student focused on a chess game">
                </div>
                <div class="photo-item">
                    <img src="images/IMG_1221.JPG" alt="Two students shaking hands over a chessboard">
                </div>
                <div class="photo-item">
                    <img src="images/IMG_1247.JPG" alt="Chess tournament in progress">
                </div>
                <div class="photo-item">
                    <img src="images/IMG_E1263.JPG" alt="A student receiving a chess award">
                </div>
            </div>
        </section>

        <section id="mission" class="section">
            <div class="scheduling-info">
                <h3>📅 Flexible Scheduling & Class Options</h3>
                <p>We offer weekly lessons at times that fits best for you. You are able to book a lesson anytime between Monday through Sunday, 10am-8pm. You do not have to commmit to a day and time once you have chosen your first.</p>
                <div class="availability-highlight">
                    <h4>Our Hours</h4>
                    <p><strong>Monday - Sunday:</strong> 10am - 8pm</p>
                    <p style="margin-top: 0.5rem;">Each lesson is about 1 hour long.</p>
                </div>
            </div>
            <h2>Our Purpose, Vision & Mission</h2>
            <div class="mission-grid">
                <div class="mission-item">
                    <div class="mission-icon">♟</div>
                    <h3>Our Purpose</h3>
                    <p>To ignite a lifelong passion for chess. We believe the game is a powerful tool for personal development, fostering essential skills like <strong>critical thinking</strong>, strategic planning, and <strong>self-reliance</strong>. We aim to build a strong community where every move on the board translates into greater <strong>confidence</strong> and resilience off the board.</p>
                </div>
                <div class="mission-item">
                    <div class="mission-icon">♚</div>
                    <h3>Our Vision</h3>
                    <p>To be the heart of the local chess scene—a vibrant, inclusive <strong>community</strong> hub. We aspire to create an environment where players of all ages and abilities feel supported to learn, compete, and grow, building not just their skills but also lasting friendships and a powerful sense of belonging.</p>
                </div>
                <div class="mission-item">
                    <div class="mission-icon">♜</div>
                    <h3>Our Mission</h3>
                    <p>To deliver exceptional and accessible chess instruction that inspires every student. Through a structured yet fun approach, we empower individuals to unlock their potential, develop sharp <strong>critical thinking</strong>, and build the <strong>confidence</strong> and <strong>self-reliance</strong> needed to succeed in chess and in life.</p>
                </div>
            </div>
        </section>

        <section id="services" class="section">
            <h2>Our Services</h2>
            <p style="text-align:center; color: #6c757d; margin-top: -1rem; margin-bottom: 2rem;">We offer a variety of programs tailored to different needs and skill levels.</p>
            <div class="services-grid">
                <div class="service-card">
                    <div class="service-icon">🎓</div>
                    <h3>Beginner Classes</h3>
                    <p>Perfect for new players to learn the fundamentals in a fun, supportive environment.</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">🏆</div>
                    <h3>Fun Group Events</h3>
                    <p>Join our community for tournaments, workshops, and casual play nights like our Saturday Smackdown.</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">💻</div>
                    <h3>Online Classes</h3>
                    <p>Learn from the comfort of your home with our flexible and interactive online lessons.</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">♛</div>
                    <h3>Adult Classes</h3>
                    <p>Engaging and challenging classes designed specifically for adult learners to sharpen their minds.</p>
                </div>
                <div class="service-card">
                    <div class="service-icon">🧮</div>
                    <h3>Math Lessons</h3>
                    <p>Specialized math tutoring for grades 1-12, building on the logical skills honed in chess.</p>
                </div>
            </div>
        </section>


        <section id="location" class="section">
            <h2>Our Location</h2>
            <p style="text-align:center; color: #6c757d; margin-top: -1rem; margin-bottom: 2rem;">First Room Inside Brady’s Fitness, 25 Amy Croft Dr, Windsor, ON N9K 1C7</p>
            <div class="map-container">
                <div class="map-overlay"></div>
                <iframe src="https://www.google.com/maps/embed?pb=!1m23!1m12!1m3!1d94421.89579248174!2d-82.94886636819548!3d42.30660250436067!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m8!3e6!4m0!4m5!1s0x883ad570c82b0ddb%3A0x9ebbadf191261024!2sFirst%20Room%20Inside%20Brady%E2%80%99s%20Fitness%2C%2025%20Amy%20Croft%20Dr%2C%20Windsor%2C%20ON%20N9K%201C7!3m2!1d42.306632!2d-82.8664656!5e0!3m2!1sen!2sca!4v1753996571202!5m2!1sen!2sca" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
            <div class="location-photos-grid">
                <div class="location-photo">
                    <img src="images/front.jpeg" alt="Front view of the chess club location">
                </div>
                <div class="location-photo">
                    <img src="images/inside.jpeg" alt="Inside view of the chess club location">
                </div>
            </div>
        </section>

        <section id="events" class="section">
            <h2>Upcoming Events</h2>
            <div class="events-grid">
                <div class="event-card" id="event-smackdown">
                    <div class="event-date">
                        <span class="month">EVERY</span>
                        <span class="day">SAT</span>
                    </div>
                    <div class="event-details">
                        <h3>Saturday Smackdown</h3>
                        <p>Your kids get to apply what they've been learning, play with other students and enjoy the chess atmosphere together with our community. Every Saturday at 2pm!</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="reviews" class="reviews-section">
            <h2>What Our Students Say</h2>
            <div class="reviews-slider-container">
                <div class="reviews-slider">
                    <div class="reviews-page">
                        <div class="review">
                            <p>"My son showed some interest in chess, and Hasan created such a fun and encouraging space for him to explore it. He's not just learning moves, he's genuinely excited about the game now. It's been awesome to watch." - Paul H.</p>
                        </div>
                    </div>
                    <div class="reviews-page">
                        <div class="review">
                            <p>"I always wanted to learn chess but never knew where to start. The adult class is super chill and welcoming. Hasan is a great teacher who makes it easy to ask questions, and the whole group has a really friendly vibe. It's a great way to spend an evening." - Mark R.</p>
                        </div>
                    </div>
                    <div class="reviews-page">
                        <div class="review">
                            <p>"Our daughter wanted to try a tournament, and Hasan's coaching was amazing! He gave her tips that made a huge difference and she went into it feeling confident and had a great time. He really knows how to connect with the kids." - Jennifer W.</p>
                        </div>
                    </div>
                    <div class="reviews-page">
                        <div class="review">
                            <p>"We were looking for an activity to help our son with focus, and this has been perfect. Hasan's classes are the perfect mix of fun and learning. We've noticed he's more patient and thoughtful, not just in chess, but with other things too." - David C.</p>
                        </div>
                    </div>
                    <div class="reviews-page">
                        <div class="review">
                            <p>"With my schedule, online lessons were the only way to go, and it's been so convenient. Hasan is great at explaining things clearly over video, and I feel like I'm learning a ton without having to leave the house. It works perfectly." - Lisa V.</p>
                        </div>
                    </div>
                    <div class="reviews-page">
                        <div class="review">
                            <p>"My kids look forward to their chess class all week! Hasan makes it so much fun for them. They're learning a lot, but they're also just having a great time with the other kids. It's awesome to see them so excited about something." - Amy S.</p>
                        </div>
                    </div>
                    <div class="reviews-page">
                        <div class="review">
                            <p>"I wanted to pick up a new hobby and the adult chess class has been perfect. It's a fun way to challenge myself and meet new people. Hasan creates a really relaxed atmosphere. I look forward to it every week." - Tom B.</p>
                        </div>
                    </div>
                </div>
                <div class="slider-navigation">
                    <button class="prev-slide" aria-label="Previous slide">&#10094;</button>
                    <button class="next-slide" aria-label="Next slide">&#10095;</button>
                </div>
                <div class="slider-dots"></div>
            </div>
            <div class="section-cta-wrapper">
                <a href="#contact" class="cta-button">
                    Book A Free Intro Lesson!
                    <span class="cta-button-subtext">(scrolls to bottom)</span>
                </a>
            </div>
        </section>
        
        <section id="pricing" class="section">
            <h2>Membership Menu</h2>
            <p style="text-align:center; color: #6c757d; margin-top: -1rem; margin-bottom: 2rem;">each price has a $2 tax</p>
            <div class="pricing-table">
                <div class="pricing-card" id="card1">
                    <span class="price-icon">♞</span>
                    <h3>Once a Week</h3>
                    <div class="price">$25<span style="font-size: 1.5rem;">/w</span></div>
                    <p>Perfect for individual focused learning</p>
                    <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                        <li>✓ 1 class per week</li>
                        <li>✓ 1-1 lessons or small group settings</li>
                        <li>✓ Age-appropriate instruction</li>
                        <li>✓ Progress tracking</li>
                        <li>✓ Discount prices on tournaments</li>
                    </ul>
                </div>
                <div class="pricing-card" id="card2.0">
                    <span class="price-icon">♝</span>
                    <h3>Twice a Week</h3>
                    <div class="price">$45<span style="font-size: 1.5rem;">/w</span></div>
                    <p>Ideal for advanced learning</p>
                    <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                        <li>✓ 2 classes per week</li>
                        <li>✓ 1-1 lessons or small group settings</li>
                        <li>✓ Accelerated learning</li>
                        <li>✓ Progress tracking</li>
                        <li>✓ Discount prices on tournaments</li>
                    </ul>
                </div>
                <div class="pricing-card" id="card5.0">
                    <span class="price-icon">♚</span>
                    <h3>Parent & Child Classes</h3>
                    <div class="price">$30<span style="font-size: 1.5rem;">/w</span></div>
                    <p>Learn together and bond over chess</p>
                    <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                        <li>✓ Family bonding activity</li>
                        <li>✓ Parent learns alongside child</li>
                        <li>✓ 1 Hour lessons</li>
                    </ul>
                </div>
                <div class="pricing-card" id="card7.0">
                    <span class="price-icon">♕</span>
                    <h3>Adult Classes</h3>
                    <p style="font-size: 0.9rem; margin-top: -0.25rem; margin-bottom: 0.75rem; font-weight: 500; color: rgba(255,255,255,0.9);">+$5 for partner</p>
                    <div class="price">$25<span style="font-size: 1.5rem;">/w</span></div>
                    <p>Chess instruction for adult learners</p>
                    <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                        <li>✓ Adult-focused teaching</li>
                        <li>✓ Strategic thinking emphasis</li>
                        <li>✓ Competitive play preparation</li>
                        <li>✓ Flexible learning pace</li>
                    </ul>
                </div>
                <div class="pricing-card" id="card8.0">
                    <span class="price-icon">💻</span>
                    <h3>Online Classes</h3>
                    <div class="price">$30<span style="font-size: 1.5rem;">/w</span></div>
                    <p>Flexible learning from anywhere</p>
                    <ul style="list-style: none; padding: 0; margin-top: 1rem;">
                        <li>✓ Learn from home</li>
                        <li>✓ Flexible scheduling</li>
                        <li>✓ Access to online resources</li>
                        <li>✓ Global community</li>
                    </ul>
                </div>

            </div>
            <div class="section-cta-wrapper">
                <a href="#contact" class="cta-button">
                    Book A Free Intro Lesson!
                    <span class="cta-button-subtext">(scrolls to bottom)</span>
                </a>
            </div>
        </section>

        <section id="about" class="section">
            <h2>About Your Instructor</h2>
            <div class="about-grid">
                <div>
                    <img src="images/instructor-photo.jpg" alt="Photo of the instructor, Hasan" class="instructor-avatar">
                    <h3 class="instructor-name">Hasan Bukhari</h3>
                </div>
                <div>
                    <p>With over 10 years of chess experience, I'm passionate about sharing the beauty and strategy of chess with students of all ages. I have taught over 140+ students in the Tecumseh and Windsor Community.</p>
                    <p>My teaching philosophy focuses on making chess fun and accessible while building strong fundamentals. Whether you're a complete beginner or looking to break through to the next level, our lessons are designed to instill deep chess understanding and confidence in your or your child's ability.</p>
                </div>
            </div>
            <div class="section-cta-wrapper">
                <a href="#contact" class="cta-button">
                    Book A Free Intro Lesson!
                    <span class="cta-button-subtext">(scrolls to bottom)</span>
                </a>
            </div>
        </section>

        <section id="math-tutoring" class="section">
            <h2>Beyond the Board: Math Tutoring</h2>
            <div style="text-align: center; max-width: 700px; margin: 0 auto 2rem;">
                <span class="mission-icon" style="font-size: 3.5rem;">🧮</span>
                <p style="font-size: 1.2rem; color: #4a5568; margin-bottom: 1.5rem;">
                    In addition to our chess programs, we are proud to offer specialized math tutoring for students from <strong>Grade 1 to 12</strong>. We believe the logical skills honed in chess are a perfect complement to mathematical excellence.
                </p>
            </div>
            <div class="section-cta-wrapper">
                <a href="#contact" class="cta-button" id="math-cta-button">Book Free Intro Math Lesson</a>
            </div>
        </section>

        <section id="contact" class="section">
            <h2>Book Your Free Intro Lesson</h2>
            <form class="contact-form" action="https://formsubmit.co/hasanbukhari1978@gmail.com" method="POST">
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" required>
                    <span class="error-message"></span>
                </div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                    <span class="error-message"></span>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="phone" required>
                    <span class="error-message"></span>
                </div>
                <div class="form-group">
                    <label for="classType">What class are you interested in?</label>
                    <span class="error-message"></span>
                    <select id="classType" name="classType" required>
                        <option value="">Select a class type</option>
                        <option value="1kid">Once a Week</option>
                        <option value="1kid-twice">Twice a Week</option>
                        <option value="parentkid">Parent & Child Classes</option>
                        <option value="adult">Adult Group Class</option>
                        <option value="online">Online Classes</option>
                        <option value="math-tutoring">Math Tutoring (Grades 1-12)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="numKids">How many people will be joining the lesson?</label>
                    <input type="number" id="numKids" name="numKids" min="0" max="10" placeholder="Enter number of attendees" />
                </div>
                <div class="form-group">
                    <label for="kidsnames">Please enter the names of whos joining!</label>
                    <input type="text" id="kidsnames" name="kidsnames" placeholder="e.g. Jana, Max" />
                </div>
                <div class="form-group">
                    <label for="kidsAges">Please enter the ages of the people attending</label>
                    <input type="text" id="kidsAges" name="kidsAges" />
                </div>
                <div class="form-group">
                    <label for="experience">Chess Experience Level <span class="optional-text">(optional)</span></label>
                    <select id="experience" name="experience">
                        <option value="">Select level</option>
                        <option value="beginner">Complete Beginner</option>
                        <option value="casual">Some Knowledge</option>
                        <option value="intermediate">Intermediate</option>
                        <option value="advanced">Advanced</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="goals">What are your goals for yourself or your kids? <span class="optional-text">(optional)</span></label>
                    <textarea id="goals" name="goals" rows="4" placeholder="Tell me about what you'd like to achieve with chess lessons..."></textarea>
                </div>
                <div class="form-group">
                    <label for="availability">Preferred lesson times <span class="optional-text">(optional)</span></label>
                    <textarea id="availability" name="availability" rows="3" placeholder="Let me know your preferred days and times for lessons..."></textarea>
                </div>
                <button type="submit" class="submit-btn">Send Message & Book Free Intro Lesson</button>
            </form>
        </section>
    </main>
    <footer>
        <div class="container">
            <p>© 2025 Tecumseh Chess. All rights reserved.</p>
            <p>📍 Serving the local community of Tecumseh | 📧 hasanbukhari1978@gmail.com | 📞 (519) 890-5885</p>
            <div class="social-links">
                <a href="mailto:hasanbukhari1978@gmail.com" title="Email us">📧</a>
                <a href="https://instagram.com/tecumsehchess" target="_blank" title="Follow us on Instagram">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>
                </a>
                <a href="tel:5198905885" title="Call us">📞</a>
            </div>
        </div>
    </footer>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>Book a Lesson for <span id="modal-date"></span></h3>
            <p>Select a time, enter your details, and your time and day will be booked for your kids or your yourself!</p>
            
            <div class="modal-form-group">
                <label>Lesson Type</label>
                <div class="lesson-type-selector">
                    <label><input type="radio" name="lessonType" value="chess" checked> Chess</label>
                    <label><input type="radio" name="lessonType" value="math"> Math</label>
                </div>
            </div>

            <div class="modal-form-group">
                <label>Select an Available Time</label>
                <div id="modal-time-slots">
                    <!-- JS will populate this with time slots -->
                </div>
            </div>

            <div class="modal-form-group">
                <label for="modal-kids-names">Student's Name(s)</label>
                <input type="text" id="modal-kids-names">
            </div>

            <div class="modal-form-group" style="text-align: center; margin-bottom: 1.5rem;">
                <label style="display: inline-flex; align-items: center; gap: 10px; cursor: pointer; font-weight: 500;">
                    <input type="checkbox" id="modal-book-3-weeks" style="width: 1.2em; height: 1.2em; accent-color: #38a169; flex-shrink: 0;">
                    <span>Book for the next 3 weeks <small style="font-weight: 400; color: #6c757d; margin-left: 4px;">(you can change times if needed)</small></span>
                </label>
            </div>

            <div id="modal-current-bookings-container">
                <!-- JS will populate this with current bookings for the day -->
            </div>

            <a href="#" class="cta-button" id="modal-book-button">Confirm Booking & Add to Calendar</a>
        </div>
    </div>

    <!-- Supabase Client Library -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]:not([href="#"])').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    const headerOffset = 80; // The height of your fixed header
                    const elementPosition = targetElement.getBoundingClientRect().top;
                    const offsetPosition = elementPosition + window.pageYOffset - headerOffset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Add scroll effect to header
        window.addEventListener('scroll', () => {
            const header = document.querySelector('header');
           if (window.scrollY > 100) {
                header.style.background = 'rgba(255, 255, 255, 0.98)';
            } else {
                header.style.background = 'rgba(255, 255, 255, 0.95)';
            }
        });

        // Animate sections on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
               if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(30px)';
            section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(section);
        });
        
        document.querySelectorAll('.pricing-card').forEach(card => {
            card.addEventListener('click', () => {
                const cardId = card.id;
                let classTypeValue = '';
       
                switch (cardId) {
                    case 'card1': classTypeValue = '1kid'; break;
                    case 'card2.0': classTypeValue = '1kid-twice'; break;
                    case 'card5.0': classTypeValue = 'parentkid'; break;
                    case 'card7.0': classTypeValue = 'adult'; break;
                    case 'card8.0': classTypeValue = 'online'; break;
                }

                if (classTypeValue) {
                    // Set the selected value in the contact form
                    const classTypeSelect = document.getElementById('classType');
                    if (classTypeSelect) {
                        classTypeSelect.value = classTypeValue;
                    }

                    // Scroll to the contact form
                    const contactForm = document.getElementById('contact');
                    if (contactForm) {
                        contactForm.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }
            });
        });

        // Pre-select math tutoring from its CTA
        const mathCtaButton = document.getElementById('math-cta-button');
        if (mathCtaButton) {
            mathCtaButton.addEventListener('click', () => {
                const classTypeSelect = document.getElementById('classType');
                if (classTypeSelect) {
                    classTypeSelect.value = 'math-tutoring';
                }
            });
        }

        // Map overlay functionality to prevent scroll-hijacking on mobile
        const mapContainer = document.querySelector('.map-container');
        if (mapContainer) {
            mapContainer.addEventListener('click', function() {
                const overlay = this.querySelector('.map-overlay');
                if (overlay) {
                    overlay.classList.add('hidden');
                }
            }, { once: true }); // The listener is removed after the first click
        }

        // Review slider functionality
        const slider = document.querySelector('.reviews-slider');
        const prevButton = document.querySelector('.prev-slide');
        const nextButton = document.querySelector('.next-slide');
        const pages = document.querySelectorAll('.reviews-page');
        const dotsContainer = document.querySelector('.slider-dots');
        let currentIndex = 0;

        // Create dots
        pages.forEach((_, i) => {
            const dot = document.createElement('span');
            dot.classList.add('dot');
            dot.dataset.index = i;
            dotsContainer.appendChild(dot);
        });

        const dots = document.querySelectorAll('.dot');

        // Add click event to dots
        dots.forEach(dot => {
            dot.addEventListener('click', (e) => {
                currentIndex = parseInt(e.target.dataset.index);
                updateSlider();
                stopAutoSlide();
            });
        });

        nextButton.addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % pages.length;
            updateSlider();
        });

        prevButton.addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + pages.length) % pages.length;
            updateSlider();
        });

        function updateSlider() {
            const translateAmount = -currentIndex * 100;
            slider.style.transform = `translateX(${translateAmount}%)`;
            dots.forEach(dot => dot.classList.remove('active'));
            dots[currentIndex].classList.add('active');
        }

        // Auto-slide functionality
        const autoSlideIntervalTime = 5000; // 5 seconds
        let autoSlideInterval;

        function startAutoSlide() {
            autoSlideInterval = setInterval(() => {
                currentIndex = (currentIndex + 1) % pages.length; // Loop back to start
                updateSlider();
            }, autoSlideIntervalTime);
        }

        function stopAutoSlide() {
            clearInterval(autoSlideInterval);
        }

        // Pause auto-slide on manual interaction
        prevButton.addEventListener('click', stopAutoSlide);
        nextButton.addEventListener('click', stopAutoSlide);
        dotsContainer.addEventListener('click', stopAutoSlide);

        // Hamburger menu functionality
        const hamburger = document.querySelector('.hamburger-menu');
        const navLinks = document.querySelector('.nav-links');

        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('mobile-active');
            hamburger.classList.toggle('open');
        });

        // Close mobile menu when a link is clicked
        navLinks.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('mobile-active');
                hamburger.classList.remove('open');
            });
        });

        updateSlider(); // Set initial slide and dot
        startAutoSlide(); // Start auto-slide

        // --- Calendar Functionality ---
        const monthYearEl = document.getElementById('month-year');
        const calendarGrid = document.getElementById('calendar-grid');
        const prevMonthBtn = document.getElementById('prev-month');
        const nextMonthBtn = document.getElementById('next-month');

        // Modal elements
        const modal = document.getElementById('booking-modal');
        const closeModalBtn = document.querySelector('.close-button');
        const modalDateEl = document.getElementById('modal-date');
        const modalBookButton = document.getElementById('modal-book-button');

        let viewStartDate = new Date();
        viewStartDate.setHours(0, 0, 0, 0); // Normalize to the start of today

        // This will hold the booking data fetched from the central server.
        // The data will be structured like: { "YYYY-MM-DD": [ {id: "...", ...}, ... ] }
        let bookings = {};

        // --- Supabase Setup ---
        // IMPORTANT: Replace these with your actual Supabase URL and Anon Key!
        const SUPABASE_URL = 'https://rgpgrpigtpqwvxlqylra.supabase.co'; // This is your project URL
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJncGdycGlndHBxd3Z4bHF5bHJhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwNTY5OTUsImV4cCI6MjA2OTYzMjk5NX0.rhEbl1N1_qnh8YTBfbyaeQxflCLaKBQprhylirivihw'; // This is your public anon key

        // Initialize the Supabase client
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // NEW: Function to fetch all bookings from the server
        async function fetchBookings() {
            try {
                const { data, error } = await supabaseClient
                    .from('bookings') // The table name you created
                    .select('*');

                if (error) throw error;

                // Transform the flat array from Supabase into the nested object the calendar expects
                // This groups all bookings by their date.
                bookings = data.reduce((acc, booking) => {
                    const dateKey = booking.date; // The 'date' column in your Supabase table
                    if (!acc[dateKey]) {
                        acc[dateKey] = [];
                    }
                    acc[dateKey].push(booking);
                    return acc;
                }, {});

                renderCalendar(); // Re-render the calendar with the fresh data
            } catch (error) {
                console.error('Error fetching bookings from Supabase:', error.message);
                alert('Could not load the schedule. Please try refreshing the page.');
            }
        };

        // Helper to get a consistent date key in local time, avoiding timezone issues.
        function getDateKey(date) {
            const year = date.getFullYear();
            const month = (date.getMonth() + 1).toString().padStart(2, '0'); // getMonth() is 0-indexed
            const day = date.getDate().toString().padStart(2, '0');
            return `${year}-${month}-${day}`;
        }


        const renderCalendar = () => {
            calendarGrid.innerHTML = ''; // Clear previous days
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const daysToShow = 12; // 4 rows of 3
            const endDate = new Date(viewStartDate.getFullYear(), viewStartDate.getMonth(), viewStartDate.getDate() + daysToShow - 1);

            // Update header text to show the range
            const startMonth = viewStartDate.toLocaleString('default', { month: 'short' });
            const endMonth = endDate.toLocaleString('default', { month: 'short' });
            monthYearEl.textContent = `${startMonth} ${viewStartDate.getDate()} - ${endMonth} ${endDate.getDate()}, ${endDate.getFullYear()}`;

            // Generate 12 days
            for (let i = 0; i < daysToShow; i++) {
                // Create a new date for each day to avoid mutation issues.
                // This is more robust than using an iterator.
                const dayDate = new Date(viewStartDate.getFullYear(), viewStartDate.getMonth(), viewStartDate.getDate() + i);

                const dayEl = document.createElement('div');
                dayEl.classList.add('calendar-day');

                const dayOfWeek = dayDate.getDay();
                const dayOfMonth = dayDate.getDate();
                const dayOfWeekStr = dayDate.toLocaleDateString('en-US', { weekday: 'short' });

                // Since all days have the same slots, we just make them all bookable
                dayEl.classList.add('booked');
                dayEl.addEventListener('click', (e) => {
                    // If the click was on a delete button, let the delegated handler on the grid manage it
                    // and do not open the modal.
                    if (e.target.closest('.delete-booking-btn')) {
                        return;
                    }
                    openModal(dayDate);
                });

                // Highlight today
                if (dayDate.getTime() === today.getTime()) {
                    dayEl.classList.add('today');
                }

                dayEl.innerHTML = `
                    <span class="day-of-week">${dayOfWeekStr}</span>
                    <span class="day-number">${dayOfMonth}</span>
                `;

                // Add booking list if bookings exist
                const dateKey = getDateKey(dayDate);

                let dayBookings = (bookings[dateKey] || []).sort((a, b) => {
                        const timeToMinutes = (timeStr) => {
                            const [time, modifier] = timeStr.split(' ');
                            let [hours, minutes] = time.split(':').map(Number);
                            if (modifier === 'PM' && hours !== 12) {
                                hours += 12;
                            }
                            if (modifier === 'AM' && hours === 12) {
                                hours = 0; // Midnight case
                            }
                            return hours * 60 + (minutes || 0);
                        };
                        return timeToMinutes(a.time) - timeToMinutes(b.time);
                    });

                if (dayBookings.length > 0) {
                    const bookingList = document.createElement('ul');
                    bookingList.classList.add('day-booking-list');
                    dayBookings.forEach(booking => {
                        // Default type to chess if not present, for backward compatibility
                        if (!booking.type) booking.type = 'chess';

                        const listItem = document.createElement('li');

                        // CSS will handle truncation with ellipsis if the name is too long.
                        const displayName = booking.name;
                        if (booking.type === 'math') {
                            listItem.classList.add('math-booking');
                        }

                        // The server MUST provide a unique `id` for each booking for reliable deletion.
                        const deleteButtonHtml = `<button class="delete-booking-btn" title="Cancel booking" data-booking-id="${booking.id}">&times;</button>`;

                        listItem.title = `${booking.name} - ${booking.time}`; // Tooltip always shows full name
                        listItem.innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg>
                            <div class="booking-info">
                                <span class="booking-name">${displayName}</span>
                                <span class="booking-time">${booking.time}</span>
                            </div>
                            ${deleteButtonHtml}
                        `;
                        bookingList.appendChild(listItem);
                    });
                    dayEl.appendChild(bookingList);
                }
                calendarGrid.appendChild(dayEl);
            }
        };

        // Define the standard available time slots for any given day.
        const standardAvailableSlots = [
            "10:00 AM", "10:30 AM", "11:00 AM", "11:30 AM",
            "12:00 PM", "12:30 PM", "1:00 PM", "1:30 PM", "2:00 PM", "2:30 PM", "3:00 PM", "3:30 PM", "4:00 PM", "4:30 PM", "5:00 PM", "5:30 PM",
            "6:00 PM", "6:30 PM", "7:00 PM", "7:30 PM", "8:00 PM"
        ];

        const openModal = (date) => {
            document.getElementById('modal-kids-names').value = '';
            document.getElementById('modal-book-3-weeks').checked = false;
            document.querySelector('input[name="lessonType"][value="chess"]').checked = true;
            modal.dataset.selectedDate = date.toISOString(); // Store the date object for later use
            modalDateEl.textContent = date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });

            const bookingsContainer = document.getElementById('modal-current-bookings-container');
            bookingsContainer.innerHTML = ''; // Clear previous content

            const timeSlotsContainer = document.getElementById('modal-time-slots');
            timeSlotsContainer.innerHTML = ''; // Clear previous slots

            // Get already booked times for this day
            const dateKey = getDateKey(date);
            const dayBookings = bookings[dateKey] || [];

            // Display current bookings for the day in the modal
            if (dayBookings.length > 0) {
                bookingsContainer.style.display = 'block'; // Show the container
                const title = document.createElement('h4');
                title.textContent = 'Current Bookings';
                bookingsContainer.appendChild(title);

                const bookingList = document.createElement('ul');
                bookingList.className = 'day-booking-list'; // Reuse styles from calendar

                // Sort for display (already sorted in calendar render, but good to be safe here too)
                const sortedBookings = [...dayBookings].sort((a, b) => {
                    const timeToMinutes = (timeStr) => {
                        const [time, modifier] = timeStr.split(' ');
                        let [hours, minutes] = time.split(':').map(Number);
                        if (modifier === 'PM' && hours !== 12) hours += 12;
                        if (modifier === 'AM' && hours === 12) hours = 0;
                        return hours * 60 + (minutes || 0);
                    };
                    return timeToMinutes(a.time) - timeToMinutes(b.time);
                });

                sortedBookings.forEach(booking => {
                    const listItem = document.createElement('li');
                    if (booking.type === 'math') listItem.classList.add('math-booking');
                    listItem.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg>
                        <div class="booking-info"><span class="booking-name">${booking.name}</span><span class="booking-time">${booking.time}</span></div>
                    `;
                    bookingList.appendChild(listItem);
                });
                bookingsContainer.appendChild(bookingList);
            } else {
                bookingsContainer.style.display = 'none'; // Hide if no bookings
            }

            // All time slots are always available for group bookings.
            const availableNow = standardAvailableSlots;

            // Group slots by time of day
            const morningSlots = availableNow.filter(slot => {
                const hour = parseInt(slot.split(':')[0]);
                return slot.includes('AM') && hour >= 10;
            });
            const afternoonSlots = availableNow.filter(slot => {
                const hour = parseInt(slot.split(':')[0]);
                return slot.includes('PM') && (hour < 6 || hour === 12);
            });
            const eveningSlots = availableNow.filter(slot => {
                const hour = parseInt(slot.split(':')[0]);
                return slot.includes('PM') && hour >= 6 && hour !== 12;
            });

            const createTimePeriod = (title, slots) => {
                if (slots.length === 0) return;
                const periodDiv = document.createElement('div');
                periodDiv.classList.add('time-period');
                const titleEl = document.createElement('h4');
                titleEl.textContent = title;
                periodDiv.appendChild(titleEl);
                const container = document.createElement('div');
                container.classList.add('time-slots-container');
                slots.forEach(slot => {
                    const btn = document.createElement('button');
                    btn.classList.add('time-slot-btn');
                    btn.textContent = slot;
                    btn.dataset.time = slot;
                    btn.addEventListener('click', () => {
                        const currentlySelected = document.querySelector('#modal-time-slots .selected');
                        if (currentlySelected) {
                            currentlySelected.classList.remove('selected');
                        }
                        btn.classList.add('selected');
                    });
                    container.appendChild(btn);
                });
                periodDiv.appendChild(container);
                timeSlotsContainer.appendChild(periodDiv);
            };

            if (availableNow.length > 0) {
                createTimePeriod('Morning', morningSlots);
                createTimePeriod('Afternoon', afternoonSlots);
                createTimePeriod('Evening', eveningSlots);
            } else {
                timeSlotsContainer.innerHTML = '<p style="text-align:center; width:100%;">No available time slots for this day.</p>';
            }

            modal.style.display = 'block';
        };

        const closeModal = () => { modal.style.display = 'none'; };

        // Update button labels to be more accurate
        prevMonthBtn.setAttribute('aria-label', 'Previous 12 Days');
        nextMonthBtn.setAttribute('aria-label', 'Next 12 Days');

        prevMonthBtn.addEventListener('click', () => {
            viewStartDate.setDate(viewStartDate.getDate() - 12); // Go back 12 days
            renderCalendar();
        });

        nextMonthBtn.addEventListener('click', () => {
            viewStartDate.setDate(viewStartDate.getDate() + 12); // Go forward 12 days
            renderCalendar();
        });

        closeModalBtn.addEventListener('click', closeModal);
        window.addEventListener('click', (event) => {
            if (event.target == modal) {
                closeModal();
            }
        });
        
        // When the user clicks the "Book Now" button in the modal, scroll to the contact form
        modalBookButton.addEventListener('click', async (e) => {
            e.preventDefault();

            // Get data from modal
            const kidsNames = document.getElementById('modal-kids-names').value;
            const selectedTimeBtn = document.querySelector('#modal-time-slots .selected');
            const selectedDateISO = modal.dataset.selectedDate;
            const lessonType = document.querySelector('input[name="lessonType"]:checked').value;
            const bookThreeWeeks = document.getElementById('modal-book-3-weeks').checked;

            // Validation
            if (!selectedTimeBtn) {
                alert('Please select a time.');
                return;
            }
            if (kidsNames.trim() === '') {
                alert("Please enter the student's name(s).");
                return;
            }

            const selectedTime = selectedTimeBtn.dataset.time;

            // Create a list of new bookings to send to the server
            const newBookingsPayload = [];
            const bookingDetails = {
                time: selectedTime,
                name: kidsNames.trim(),
                type: lessonType
            };

            if (bookThreeWeeks) {
                for (let i = 0; i < 3; i++) {
                    const bookingDate = new Date(selectedDateISO);
                    bookingDate.setDate(bookingDate.getDate() + (i * 7));
                    newBookingsPayload.push({
                        date: getDateKey(bookingDate), // Send the date with each booking
                        ...bookingDetails
                    });
                }
            } else {
                newBookingsPayload.push({
                    date: getDateKey(new Date(selectedDateISO)),
                    ...bookingDetails
                });
            }

            // Send the new bookings to the server
            try {
                const { error } = await supabaseClient
                    .from('bookings')
                    .insert(newBookingsPayload); // Supabase can insert an array of new rows

                if (error) throw error;

                // If successful, fetch the latest bookings to update the UI
                await fetchBookings();
                closeModal();
            } catch (error) {
                console.error('Error saving booking to Supabase:', error.message);
                alert('There was a problem saving your booking. Please try again.');
            }
        });

        // Event delegation for deleting bookings
        calendarGrid.addEventListener('click', async function(e) {
            const deleteButton = e.target.closest('.delete-booking-btn');
            if (deleteButton) {
                e.stopPropagation(); // Prevent modal from opening

                const bookingId = deleteButton.dataset.bookingId;
                if (!bookingId) return console.error('Delete button is missing a booking ID.');

                if (confirm('Are you sure you want to cancel this booking?')) {
                    try {
                        const { error } = await supabaseClient
                            .from('bookings')
                            .delete()
                            .eq('id', bookingId); // Delete the row where the 'id' matches

                        if (error) throw error;
                        await fetchBookings(); // Refresh the calendar from the server
                    } catch (error) {
                        console.error('Error deleting booking from Supabase:', error.message);
                        alert('There was a problem canceling your booking. Please try again.');
                    }
                }
            }
        });

        // Initial load of all bookings from the server when the page opens
        fetchBookings();
    </script>
</body>
</html>
